<html>

<head>
    <meta name="viewport" content="width=device-width; initial-scale=1.0;" />
    <title>Pay</title>
    <style type="text/css">
        body {
            font-family: Arial, Helvetica, sans-serif;        }
        .addButton, .removeButton {
            width: 26px;
            height: 26px;
            padding: 0;
            text-align: center;
            line-height: 26px;
            text-decoration: none;
            color: red;
            font-weight: 500;
            border-radius: 2px;
            border: none;
            cursor: pointer;
            outline: 0;
            background-color: #eaeaea;
            background-repeat: no-repeat;
            background-position:center center
        }
        td {
            vertical-align: top;
            color: #333333;
            font-weight: 500;
            padding-bottom: 15px;
            padding-right: 15px;
        }
        .mainButton {
            width: 96%;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            background: red;
            text-align: center;
            height: 20px;
            padding: 10px 0 10px 0;
            position: fixed;
            left: 2%;
            bottom: 2%;
        }
        table {
            width: 100%;
            padding-top: 40px;
        }
        #basketButtonPoundSymbol {
            visibility: hidden;
        }
        #payButton, #payment-request-button {
            display: none;
        }
        #basketTable {
            display: none;
        }
    </style>
    <script type="text/javascript">
        function callNativeApp() {
            try {
                webkit.messageHandlers.callback.postMessage("showPayButton");
            } catch(err) {
                ;
            }
        }
        
        var total = 0;

        var menuItems = [
            ["Filet-O-Fish", 2.99],
            ["Medium Fries", 1.09],
            ["Coca Cola", 1.11]
        ]

        function addMenuItem(element, menuItemIndex) {
            var quantity = 0;
            if (element.textContent != "+") {
                quantity = parseInt(element.textContent, 10);
            }
            quantity++;
            element.textContent = quantity;

            document.getElementById("basketButtonPoundSymbol").style.visibility = "visible";

            total += menuItems[menuItemIndex][1];
            document.getElementById("basketButtonTotal").textContent = total.toFixed(2);
            //document.getElementById("payButtonTotal").textContent = total.toFixed(2);

            var tr = document.createElement("tr");
            var td1 = document.createElement("td");
            var td2 = document.createElement("td");
            var td3 = document.createElement("td");
            
            td1.textContent = menuItems[menuItemIndex][0];
            td2.textContent = menuItems[menuItemIndex][1];

            var removeButton = document.createElement("div");
            removeButton.className = "removeButton";
            removeButton.textContent = "-";

            td3.appendChild(removeButton);
            tr.appendChild(td1);
            tr.appendChild(td2);
            tr.appendChild(td3);

            document.getElementById("basketTable").appendChild(tr);
        }

        function showBasket() {
            document.getElementById("basketButton").style.display = "none";
            document.getElementById("menuTable").style.display = "none";
            document.getElementById("basketTable").style.display = "block";
            document.getElementById("payment-request-button").style.display = "block";
            callNativeApp();
        }
    </script>
</head>

<body>
    <div style="width: 100%; text-align: center;">
        <img src="img/mcdonalds.png">
        <br><br>
        <b>McDonald's</b>
    </div>
    <table id="menuTable">
        <tr>
            <td><b>Burgers</b></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td style="width: 70%;">Big Mac</td>
            <td style="width: 20%;">&pound;3.09</td>
            <td style="width: 10%;"><div class="addButton">+</div></td>
        </tr>
        <tr>
            <td style="width: 70%;">Quarter Pounder with Cheese</td>
            <td style="width: 20%;">&pound;3.09</td>
            <td style="width: 10%;"><div class="addButton">+</div></td>
        </tr>
        <tr>
            <td style="width: 70%;">Double Cheeseburger</td>
            <td style="width: 20%;">&pound;1.59</td>
            <td style="width: 10%;"><div class="addButton">+</div></td>
        </tr>
        <tr>
            <td style="width: 70%;">Bacon Double Cheeseburger</td>
            <td style="width: 20%;">&pound;1.99</td>
            <td style="width: 10%;"><div class="addButton">+</div></td>
        </tr>
        <tr>
            <td style="width: 70%;">Cheeseburger</td>
            <td style="width: 20%;">&pound;0.99</td>
            <td style="width: 10%;"><div class="addButton">+</div></td>
        </tr>
        <tr>
            <td style="width: 70%;">Hamburger</td>
            <td style="width: 20%;">&pound;0.89</td>
            <td style="width: 10%;"><div class="addButton">+</div></td>
        </tr>
        <tr>
            <td style="width: 70%;">Filet-O-Fish</td>
            <td style="width: 20%;">&pound;2.99</td>
            <td style="width: 10%;"><div class="addButton" onclick="addMenuItem(this, 0)">+</div></td>
        </tr>
        <tr>
            <td style="width: 70%;">Vegetable Deluxe</td>
            <td style="width: 20%;">&pound;2.99</td>
            <td style="width: 10%;"><div class="addButton">+</div></td>
        <tr>
            <td style="width: 70%;">Chicken Legend with Cool Mayo</td>
            <td style="width: 20%;">&pound;3.89</td>
            <td style="width: 10%;"><div class="addButton">+</div></td>
        </tr>
        <tr>
            <td style="width: 70%;">Chicken Legend with BBQ Sauce</td>
            <td style="width: 20%;">&pound;3.89</td>
            <td style="width: 10%;"><div class="addButton">+</div></td>
        </tr>
        <tr>
            <td style="width: 70%;">Chicken Legend with Hot & Spicy Mayo</td>
            <td style="width: 20%;">&pound;3.89</td>
            <td style="width: 10%;"><div class="addButton">+</div></td>
        </tr>
        <tr>
            <td style="width: 70%;">McChicken Sandwich</td>
            <td style="width: 20%;">&pound;3.09</td>
            <td style="width: 10%;"><div class="addButton">+</div></td>
        </tr>
        <tr>
            <td style="width: 70%;">Mayo Chicken</td>
            <td style="width: 20%;">&pound;0.99</td>
            <td style="width: 10%;"><div class="addButton">+</div></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td><b>Sides</b></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td style="width: 70%;">Medium Fries</td>
            <td style="width: 20%;">&pound;1.09</td>
            <td style="width: 10%;"><div class="addButton" onclick="addMenuItem(this, 1)">+</div></td>
        </tr>
        <tr>
            <td style="width: 70%;">Side Salad</td>
            <td style="width: 20%;">&pound;1.09</td>
            <td style="width: 10%;"><div class="addButton">+</div></td>
        </tr>
        <tr>
            <td style="width: 70%;">Cheese Bites</td>
            <td style="width: 20%;">&pound;1.79</td>
            <td style="width: 10%;"><div class="addButton">+</div></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td><b>Drinks</b></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td style="width: 70%;">Coca Cola</td>
            <td style="width: 20%;">&pound;1.11</td>
            <td style="width: 10%;"><div class="addButton" onclick="addMenuItem(this, 2)">+</div></td>
        </tr>
        <tr>
            <td style="width: 70%;">Diet Coke</td>
            <td style="width: 20%;">&pound;0.99</td>
            <td style="width: 10%;"><div class="addButton">+</div></td>
        </tr>
        <tr>
            <td style="width: 70%;">Buxton Mineral Water</td>
            <td style="width: 20%;">&pound;1.29</td>
            <td style="width: 10%;"><div class="addButton">+</div></td>
        </tr>
        <tr>
            <td style="width: 70%;">Tropican Orange Juice</td>
            <td style="width: 20%;">&pound;1.29</td>
            <td style="width: 10%;"><div class="addButton">+</div></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </table>
    <table id="basketTable">
        <tr>
            <td style="width: 70%;"><b>Basket</b></td>
            <td style="width: 20%;"></td>
            <td style="width: 10%;"></td>
        </tr>
    </table>
    <div id="basketButton" class="mainButton" onclick="showBasket()">Basket <span id="basketButtonPoundSymbol">&pound;</span><span id="basketButtonTotal"></span></div>
    <!--<div id="payButton" class="mainButton" onclick="pay()">Pay &pound;<span id="payButtonTotal"></span></div>-->
    <div id="payment-request-button">
        <!-- A Stripe Element will be inserted here. -->
    </div>
    <script src="https://js.stripe.com/v3/"></script>
    <script>
        var stripe = Stripe('pk_test_FeKJKjfU5KSUMa4OAC3tCZkD');

        var paymentRequest = stripe.paymentRequest({
                country: 'US',
                currency: 'usd',
                total: {
                label: 'Demo total',
                amount: 1000,
            },
            requestPayerName: false,
            requestPayerEmail: false,
        });

        var elements = stripe.elements();
        var prButton = elements.create('paymentRequestButton', {
            paymentRequest: paymentRequest,
        });

        // Check the availability of the Payment Request API first.
        paymentRequest.canMakePayment().then(function(result) {
            if (result) {
                prButton.mount('#payment-request-button');
            } else {
                document.getElementById('payment-request-button').style.display = 'none';
            }
        });
    </script>
</body>

</html>
